<!DOCTYPE html>
<html lang="en">

<body>
    <h3>Caro Game Simple</h3>
    <p id="carogame" />
    <input type="button" value="Change Value" onclick="changeValue()">
    <script>
        count=0;
        let b = document.getElementById("carogame");
        let board = [];
        let data = "";
        for (let i = 0; i < 5; i++) {
            board[i] = new Array(".", ".", ".", ".", ".");
        }

        for (let i = 0; i < 5; i++) {
            data += "<br/>";
            for (let j = 0; j < 5; j++) {
                data += board[i][j] + "&nbsp;&nbsp;";
            }
        }
        data += "<br/><br/><input type='button' value='Change Value' onclick='changeValue()'>"
        b.innerHTML = data;
        function checkWin(x,y,count){
            // if(count==1){
            //     var checkResult=1;
            //     for(var i=0;i<5;i++){
            //         if(board[x][y]!="x"){
            //             checkResult=0;
            //         };
            //     }
            // }
            // if(checkResult==1){
            //     alert("X WIN");
            // }

            // Win ngang
            for(let row=0;row<5;row++){ //Quét hàng ngang
                
                for(let col=0;col<3;col++){ //Quét hàng dọc
                if(board[row][col]=="x" && board[row][col+1]=="x" && board[row][col+2]=="x"){// Ba phần tử liên tiếp = x -> X win
                    alert("X winnnnn");
                }
                if(board[row][col]=="0" && board[row][col+1]=="0" && board[row][col+2]=="0"){// Ba phần tử liên tiếp = 0 -> 0 win
                    alert("0 winnnnn");
                }
            }
            }    
            // Win dọc
            for(let col=0;col<5;col++){ //Quét hàng ngang
                
                for(let row=0;row<3;row++){ //Quét hàng dọc
                if(board[row][col]=="x" && board[row+1][col]=="x" && board[row+2][col]=="x"){// Ba phần tử liên tiếp = x -> X win
                    alert("X winnnnn");
                }
                if(board[row][col]=="0" && board[row+1][col]=="0" && board[row+2][col]=="0"){// Ba phần tử liên tiếp = 0 -> 0 win
                    alert("0 winnnnn");
                }
            }
            }
            // Win chéo
            for (let row =0;row<3;row++){
                for(let col=0;col<5;col++){
                    if(board[row][col]=="x" && board[row+1][col+1]=="x" && board[row+2][col+2]=="x"){
                        alert("X Winnn");
                    }
                    if(board[row][col]=="x" && board[row+1][col-1]=="x" && board[row+2][col-2]=="x"){
                        alert("X Winnn");
                    }
                    if(board[row][col]=="0" && board[row+1][col+1]=="0" && board[row+2][col+2]=="0"){
                        alert("0 Winnn");
                    }
                    if(board[row][col]=="0" && board[row+1][col-1]=="0" && board[row+2][col-2]=="0"){
                        alert("0 Winnn");
                    }
                }
            }
           
        }
        function resetTable(){
            for (let i = 0; i < 5; i++) {
                data += "<br/>";
                for (let j = 0; j < 5; j++) {
                    data += board[i][j] + "&nbsp;&nbsp;&nbsp;&nbsp;";
                }
            }
            data += "<br/><br/><input type='button' value='Change Value' onclick='changeValue()'>"
            b.innerHTML = "<hr/>" + data;
        }   
        function changeValue() {
            let positionX = prompt("X: ");
            let positionY = prompt("Y: ");
            data = "";
            if(count%2==0){
                if(board[positionX][positionY] =="0" ||board[positionX][positionY] == "x" ){
                    alert(" Ngáo à, chỗ này đánh rồi!!")
                }
                else{

                board[positionX][positionY] = "x";
                count++;
                resetTable();
                checkWin(positionX,positionY,1);
                }
            }
            else{
                if(board[positionX][positionY] =="0" ||board[positionX][positionY] == "x" ){
                    alert(" Ngáo à, chỗ này đánh rồi!!")
                }
                else{
                    board[positionX][positionY] = "0";
                count++;
                resetTable();
                checkWin(positionX,positionY,0);
                }
                
            }
            
            
           
        }
    </script>
</body>

</html>